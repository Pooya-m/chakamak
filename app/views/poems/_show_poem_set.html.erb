<script type="text/javascript">
$(function () {
  $('.information').each( function () { 
    $(this).popover({
    html: true , 
    content: function() { return $(".infodiv"+this.id).html();},
    placement : 'right'
  });
});

$('body').on('click', function (e) {
    $('.information').each(function () {
        //the 'is' for buttons that trigger popups
        //the 'has' for icons within a button that triggers a popup
        if (!$(this).is(e.target) && $(this).has(e.target).length === 0 && $('.popover').has(e.target).length === 0) {
            $(this).popover('hide');
        }
    });
});

});
</script>


<div class="poets span2">
  <div class="well">
    <h4><%= t(:poets_list_html) %></h4>
    <% Poet.all.select{|p| p.poems.any?}.each do |p| %>
      <%= link_to p.poet_name , poet_show_path(p) %>
      <br>
    <% end %>
    <br>
    <h4><%= t(:subjects) %> </h4>
      <%= link_to t(:asheghane) , "/poems/asheghane" %> <br>
      <%= link_to t(:arefane) , "/poems/arefane" %> <br>
      <%= link_to t(:hemasi) , "/poems/hemasi" %> <br>
      <%= link_to t(:ejtemae) , "/poems/ejtemae" %> <br>
      <%= link_to t(:siasi) , "/poems/siasi" %> <br>
      <%= link_to t(:akhlaghi) , "/poems/akhlaghi" %> <br>
      <%= link_to t(:uncategorized) , "/poems/uncategorized" %>
  </div>
</div>
<div class="span10">
<%= paginate poems , param_name: param_name%>
<table class="table table-hover">
  <tbody>
    <% poems.each do |p| %>
      <tr>
        <td><%= p.content.split(/ {2,}/)[0] %></td>
        <td><%= p.content.split(/ {2,}/)[1] %></td>
        <td><%= p.poet_name %></td>
        <td><button class="information" id=<%=p.id%>><i class="icon-search" style="color: rgb(0, 136, 204)"></i></button></td>
        <%= render partial: "poems/popover" , locals: { p:p } %>  
      </tr>
    <% end %>
  </tbody>
</table>
<%= render partial: "poems/new" %>
</div>
<br>

